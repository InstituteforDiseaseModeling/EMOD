

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reporter component &mdash; HIV Model  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml" title="Search within HIV Model  documentation" href="_static/opensearch.xml"/>
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/tipuesearch/tipuesearch.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="HIV Model  documentation" href="index.html"/>
        <link rel="up" title="Simulation controller subsystem" href="dev-architecture-sim-controller.html"/>
        <link rel="next" title="Debugging and testing" href="dev-debugging-overview.html"/>
        <link rel="prev" title="Campaign management" href="dev-architecture-campaigns.html"/>

<link href="https://fonts.googleapis.com/css?family=Lato|Montserrat|Open+Sans" rel="stylesheet">



  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> HIV Model
          

          
            
            <img src="_static/IDM_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.13
              </div>
            
          

          <div role="search">
  <form id='rtd-search-form' class='wy-form' action="search-local.html" method="get">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off"
           placeholder="Search docs" required>
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Using the model</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-overview.html">EMOD installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-modeling.html">Introduction to disease modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-overview.html">Introduction to the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto-overview.html">How to use the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="HIV-disease-overview.html">HIV disease overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="HIV-model-overview.html">HIV model overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="HIV-IDM.html">HIV research at IDM</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameter-overview.html">EMOD parameter reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="file-reference-overview.html">Input and output file structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting EMOD simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Advancing the model</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dev-install-overview.html">EMOD source code installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dev-architecture-overview.html">EMOD architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dev-architecture-environment.html">Environment subsystem</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="dev-architecture-sim-controller.html">Simulation controller subsystem</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="dev-architecture-core.html">Simulation core components</a></li>
<li class="toctree-l3"><a class="reference internal" href="dev-architecture-campaigns.html">Campaign management</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Reporter component</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev-debugging-overview.html">Debugging and testing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HIV Model</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
  <li><a href="../index.html">IDM docs</a> &raquo;</li>
    <li><a href="index.html">HIV</a> &raquo;</li>
      
          <li><a href="dev-architecture-overview.html">EMOD architecture</a> &raquo;</li>
      
          <li><a href="dev-architecture-sim-controller.html">Simulation controller subsystem</a> &raquo;</li>
      
    <li>Reporter component</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<!-- From _templates/page.html -->

  <script>
     window.addEventListener("DOMContentLoaded", function() {
        var href = window.location.href;
        var oldBase = "https://institutefordiseasemodeling.github.io/EMOD/hiv/";
        var newBase = "https://www.idmod.org/docs/hiv/";
        var oldBasePattern = new RegExp(oldBase,"i");
        if (oldBasePattern.test(href)) {
           window.location.replace(href.replace(oldBasePattern,newBase));
        }
     }, true);
  </script>


  <div class="section" id="reporter-component">
<h1>Reporter component<a class="headerlink" href="#reporter-component" title="Permalink to this headline">¶</a></h1>
<p>After running simulations, EMOD creates output reports that contain the model results. Two
methods of coordinated reporting are implemented: simulation-wide aggregated reporting and spatial
reporting. See <a class="reference internal" href="file-outputs.html"><span class="doc">Output report structure</span></a> for more information about the different output reports available.</p>
<div class="section" id="simulation-wide-aggregate">
<h2>Simulation-wide aggregate<a class="headerlink" href="#simulation-wide-aggregate" title="Permalink to this headline">¶</a></h2>
<p>Simulation-wide aggregate reporting is the most commonly used. This reporting method generates the
output written to InsetChart.json. Conceptually, for each time step, the value of a named
<a class="reference internal" href="glossary.html#term-channel"><span class="xref std std-term">channel</span></a> is derived from values provided for that channel by each node. The values are
accumulated (summed) over all nodes and then transformed (often normalized by an internal parameter
or another channel) just prior to writing. This is implemented through the simulation’s
<strong>insetChartDataAccumulator</strong>.</p>
<p>Basic usage of the <strong>NodeTimestepDataAccumulator</strong> is explained in Report.h. The simulation is
responsible for calling <strong>Begin/EndTimestep()</strong> and collecting and writing out the data at the end of
the simulation. The accumulation calls occur in <strong>Node::accumulateInsetChartData()</strong>.</p>
</div>
<div class="section" id="spatial">
<h2>Spatial<a class="headerlink" href="#spatial" title="Permalink to this headline">¶</a></h2>
<p>The second method is spatial reporting which is facilitated by <strong>SpatialReporter</strong>. In spatial
reporting, each node again produces values for named channels, but no simulation-wide accumulation
takes place. Instead, the values of each channel for each node are written to a binary table
(ReportNNNN.dat) where NNNN is the time step. The format of this file is simple and
can be summarized as the maximally packed layout of this structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">ReportDataFormat</span>
<span class="p">{</span>
    <span class="n">int32_t</span> <span class="n">num_nodes</span><span class="p">;</span>
    <span class="n">int32_t</span> <span class="n">num_channels</span><span class="p">;</span>
    <span class="nb">float</span> <span class="n">data</span><span class="p">[</span><span class="n">num_nodes</span><span class="o">*</span><span class="n">num_channels</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Num_Channels</strong> is the number of user channels implicitly generated by the number of different
channel names requested in calls to <strong>Node::reportSpatialDataReportChannels()</strong> plus two additional
channels for longitude and latitude. JSON metadata for the ReportNNNN.dat files is written to
Report.header.dat after the first time step. It does not include entries for latitude and
longitude.</p>
<p>In general, the value of channel <img class="math" src="_images/math/ae12a24f88803b5895632e4848d87d46483c492c.png" alt="c"/> for node <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/>, starting at zero, is found at
<img class="math" src="_images/math/3a9f2f3d33d3a90b2613b584bd931ed9f6bc9cd9.png" alt="data[n\times num\_channels+c]"/>. The latitude is <img class="math" src="_images/math/4c9539e7dd63a4ae873dc93e65493ad3e38d82ca.png" alt="data[n\times num\_channels+0]"/> and the longitude is
<img class="math" src="_images/math/9e5cb790930c8d7c584494e478834b794b730a6b.png" alt="data[n\times num\_channels+1]"/>.</p>
<p>The report data files are written after every time step at the request of the <strong>Controller</strong> by
calling <strong>WriteTimestep()</strong>. Under MPI, the default implementation reduces all the data to rank 0
and writes the combined data out to file on rank 0.</p>
<p>See <a class="reference internal" href="howto-custom-reporter.html"><span class="doc">Custom reporters</span></a> for information about how to use a custom reporter.</p>
</div>
</div>


<div id="tipue_search_content"></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dev-debugging-overview.html" class="btn btn-neutral float-right" title="Debugging and testing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dev-architecture-campaigns.html" class="btn btn-neutral" title="Campaign management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Intellectual Ventures Management, LLC (IVM). All rights reserved.

    </p>
  </div>
<p>EMOD is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">Creative Commons Attribution-Noncommercial-ShareAlike 4.0 License</a>.</p>
<p>Send documentation feedback to <a href="mailto:feedback@idmod.org" target="_top">feedback@idmod.org</a>.</p>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch_content.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch_set.js"></script>
      <script type="text/javascript" src="_static/runsearch.js"></script>
      <script type="text/javascript" src="_static/tablecollapse.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<!-- Google analytics for IDM docs -->
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87656833-3', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>