

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Migration file structure &mdash; Generic Model  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml" title="Search within Generic Model  documentation" href="_static/opensearch.xml"/>
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/tipuesearch/tipuesearch.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Generic Model  documentation" href="index.html"/>
        <link rel="up" title="Input data file structure" href="file-inputs.html"/>
        <link rel="next" title="Load-balancing file structure" href="file-load-balancing.html"/>
        <link rel="prev" title="Climate file structure" href="file-climate.html"/>

<link href="https://fonts.googleapis.com/css?family=Lato|Montserrat|Open+Sans" rel="stylesheet">



  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Generic Model
          

          
            
            <img src="_static/IDM_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.13
              </div>
            
          

          <div role="search">
  <form id='rtd-search-form' class='wy-form' action="search-local.html" method="get">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off"
           placeholder="Search docs" required>
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Using the model</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-overview.html">EMOD installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-overview.html">Introduction to the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-modeling.html">Introduction to disease modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto-overview.html">How to use the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameter-overview.html">EMOD parameter reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="file-reference-overview.html">Input and output file structure</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="file-inputs.html">Input data file structure</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="parameter-demographics.html">Demographics file structure and parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-climate.html">Climate file structure</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Migration file structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-load-balancing.html">Load-balancing file structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="file-outputs.html">Output report structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-error-logging.html">Error and logging files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting EMOD simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Advancing the model</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev-install-overview.html">EMOD source code installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-architecture-overview.html">EMOD architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-debugging-overview.html">Debugging and testing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Generic Model</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
  <li><a href="../index.html">IDM docs</a> &raquo;</li>
    <li><a href="index.html">Generic</a> &raquo;</li>
      
          <li><a href="file-reference-overview.html">Input and output file structure</a> &raquo;</li>
      
          <li><a href="file-inputs.html">Input data file structure</a> &raquo;</li>
      
    <li>Migration file structure</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<!-- From _templates/page.html -->

  <div class="section" id="migration-file-structure">
<h1>Migration file structure<a class="headerlink" href="#migration-file-structure" title="Permalink to this headline">¶</a></h1>
<p>There are four types of migration files that can be used by EMOD, namely, local migration,
regional migration, air migration and sea migration. For all types, migration data is contained in a
set of two files, a metadata file with header information and a binary data file. Both files are
required. The structure of each of these files is nearly the same for all migration types, with the
only exception being the number of columns in the binary file.</p>
<p>The metadata file is a JSON-formatted file that includes a metadata section and a node offsets
section. The <strong>Metadata</strong> parameter contains a JSON object with parameters, some of which are
strictly  informational and some of which are used by Eradication.exe. However, the informational ones may
still be important to understand the provenance and meaning of the data.</p>
<p>The following parameters in the metadata section are informational:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="14%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Data type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DateCreated</td>
<td>string</td>
<td>The day the file was created.</td>
</tr>
<tr class="row-odd"><td>Author</td>
<td>string</td>
<td>The author of the file.</td>
</tr>
<tr class="row-even"><td>Tool</td>
<td>string</td>
<td>The script used to create the file.</td>
</tr>
</tbody>
</table>
<p>The following parameters in the metadata section are used by Eradication.exe:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="11%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Data type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IdReference</td>
<td>string</td>
<td>A unique, user-selected string that indicates the method used for generating <strong>NodeID</strong> values in the input file. For more information, see <a class="reference internal" href="file-inputs.html"><span class="doc">Input data file structure</span></a>.</td>
</tr>
<tr class="row-odd"><td>NodeCount</td>
<td>integer</td>
<td>The number of nodes to expect in this file.</td>
</tr>
<tr class="row-even"><td>DatavalueCount</td>
<td>integer</td>
<td>The number of data values per node. The number must be the same across every node in the binary file.</td>
</tr>
</tbody>
</table>
<p>In a second section, the <strong>NodeOffsets</strong> parameter contains a list of hex-encoded 16-byte values
used to find the data for each given node (the <strong>NodeID</strong>).They are not 16-byte offsets, but
instead, two 8-byte hex-encoded character strings. This encoding includes the source <strong>NodeID</strong>. You
can map the binary data to its corresponding source <strong>NodeID</strong> by using the <strong>NodeOffset</strong>
information.</p>
<p>The binary file contains the migration rate data in a sequential stream. In other words, it presents
all the data for the first node, then all the data for the second node, all the way through to the
last node. The data is laid out in rows and columns, with each row corresponding to a node and the
number of columns varying based on the migration type.</p>
<p>The following diagram shows how migration data is laid out in rows, with each row corresponding
to a source node and each column corresponding to the destination node.</p>
<img alt="_images/LayoutMigrationNodes.png" src="_images/LayoutMigrationNodes.png" />
<p>Migration rate is that fraction of the node’s population that is migrating per day. Units
are per person per day, meaning the number of people migrating per day divided by the total
population of the node. For example, if a node had 1,000 people and a migration rate of .01, there
would be .01 * 1,000 = 10 people migrating per day, but if the node had 10,000 people in the node
and a migration rate of .01, it would .01 * 10,000 = 100 people migrating per day. You can adjust
this rate using configuration parameters for scaling (these begin with x).</p>
<p>The binary file contains a stream of 4-byte unsigned integers that identify the destination node,
followed by a stream of 8-byte double floating point values that contain the rate associated with
the destination node (per person per day), running from 1 to the total number of nodes.</p>
<p>To use the migration files, you must set <strong>Migration_Model</strong> in the configuration file to a valid
migration type except &#8220;NO_MIGRATION&#8221;. Each migration types also requires you to set another
parameter to enable the particular type of migration selected. There are also additional parameters
in the configuration file you can use to scale or otherwise modify the data included in the climate
files.</p>
<div class="section" id="local">
<h2>Local<a class="headerlink" href="#local" title="Permalink to this headline">¶</a></h2>
<p>Local migration describes the foot travel movement of people into and out of adjacent nodes. A local
migration file is required for simulations that support more than one node. You must also set the
<strong>Enable_Local_Migration</strong> parameter in the configuration file to 1. For each location, the
local migration file represents up to eight adjacent destination nodes, with 0 used as the value for
unused nodes.</p>
<p>The following diagram shows the format for the local migration binary file data:</p>
<img alt="_images/localMigrationBFF.jpg" src="_images/localMigrationBFF.jpg" />
</div>
<div class="section" id="regional">
<h2>Regional<a class="headerlink" href="#regional" title="Permalink to this headline">¶</a></h2>
<p>Regional migration describes migration that occurs on a road or rail network for a simulation. If a
node is not part of the network, the regional migration of individuals to and from that node
considers the closest road hub city. A <a class="reference external" href="https://en.wikipedia.org/wiki/Voronoi_diagram">Voronoi</a> tiling based on road hubs is constructed of the
region, with each non-hub connected to the hub of its tile. These connections are created when the
migration file is constructed. They are not performed at runtime.</p>
<p>A regional migration file is required for simulations that cover a geography that is large enough
that road/rail migration is relevant. You must also set the <strong>Enable_Regional_Migration</strong> parameter
in the configuration file to 1. For each location, the regional migration file represents up to
30 adjacent destination nodes, with 0 used as the value for unused nodes.</p>
<p>The following diagram shows the format for the regional migration binary file data:</p>
<img alt="_images/regionalMigrationBFF.jpg" src="_images/regionalMigrationBFF.jpg" />
</div>
<div class="section" id="air">
<h2>Air<a class="headerlink" href="#air" title="Permalink to this headline">¶</a></h2>
<p>Air migration describes migration that occurs by airplane travel. An air migration file is usually
required for simulations of an entire country or larger geographies. You must also set the
<strong>Enable_Air_Migration</strong> parameter in the configuration file to 1. For each location, the air
migration file represents up to 60 adjacent destination nodes, with 0 used as the value for unused
nodes.</p>
<p>The following diagram shows the format for the air migration binary file data:</p>
<img alt="_images/airMigrationBFF.jpg" src="_images/airMigrationBFF.jpg" />
</div>
<div class="section" id="sea">
<h2>Sea<a class="headerlink" href="#sea" title="Permalink to this headline">¶</a></h2>
<p>Sea migration describes migration that occurs by ship travel. Unlike the other migration files, the
sea migration file only contains information for the nodes that are seaports. A sea migration file
does not contain every node like local, regional or air migration files do. You must also set the
<strong>Enable_Sea_Migration</strong> parameter in the configuration file to 1. For each location, the sea
migration file represents up to five adjacent destination nodes, with 0 used as the value for unused
nodes.</p>
<p>The following diagram shows the format for the sea migration binary file data:</p>
<img alt="_images/seaMigrationBFF.jpg" src="_images/seaMigrationBFF.jpg" />
</div>
</div>


<div id="tipue_search_content"></div>

           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="file-load-balancing.html" class="btn btn-neutral float-right" title="Load-balancing file structure" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="file-climate.html" class="btn btn-neutral" title="Climate file structure" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Intellectual Ventures Management, LLC (IVM). All rights reserved.

    </p>
  </div>
<p>EMOD is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">Creative Commons Attribution-Noncommercial-ShareAlike 4.0 License</a>.</p>
<p>Send documentation feedback to <a href="mailto:feedback@idmod.org" target="_top">feedback@idmod.org</a>.</p>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch_content.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch_set.js"></script>
      <script type="text/javascript" src="_static/runsearch.js"></script>
      <script type="text/javascript" src="_static/tablecollapse.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<!-- Google analytics for IDM docs -->
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87656833-3', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>